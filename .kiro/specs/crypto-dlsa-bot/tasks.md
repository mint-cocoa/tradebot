# Implementation Plan

- [x] 1. 프로젝트 구조 및 핵심 인터페이스 설정
  - 프로젝트 디렉토리 구조 생성 (data, models, services, tests 등)
  - 핵심 데이터 모델 클래스 정의 (OHLCVData, FactorExposure, ResidualData 등)
  - 서비스 인터페이스 정의 (DataCollectorInterface, FactorEngineInterface 등)
  - 기본 설정 파일 및 환경 변수 관리 시스템 구현
  - _Requirements: 1.1, 1.2, 1.3, 5.2_

- [ ] 2. 데이터 수집 및 전처리 모듈 구현
- [x] 2.1 Binance Public Data 수집기 구현
  - binance-public-data 폴더 내의 스크립트들을 이용해 자료 다운로드 
  - 실제 데이터 다운로드 및 데이터 구조 확인
  - 다운로드된 ZIP 파일 압축 해제 및 CSV 데이터 파싱
  - OHLCV 데이터 형식 표준화 및 전처리 파이프라인 구현
  - 데이터 검증 및 품질 관리 로직 구현 (중복 제거, 결측치 처리, OHLC 관계 검증)
  - 데이터 정리 및 정규화 기능 구현
  - 데이터 품질 리포트 생성 기능 구현
  - 단위 테스트 작성
  - _Requirements: 1.1, 1.4_

- [ ] 2.2 CoinGecko API 데이터 수집기 구현 (보완용)
  - CoinGecko API 클라이언트 구현 (시가총액, 기본 정보용)
  - 암호화폐 메타데이터 및 시가총액 데이터 수집
  - Binance에 없는 코인들의 가격 데이터 보완 수집
  - API 레이트 리미트 처리 및 재시도 로직 구현
  - 단위 테스트 작성
  - _Requirements: 1.1, 1.4_

- [ ] 2.3 온체인 데이터 수집기 구현 (선택적)
  - Glassnode, Dune API 클라이언트 구현
  - 토크노믹스 및 네트워크 활동 데이터 수집 함수 작성
  - 데이터 검증 및 품질 관리 로직 구현
  - 단위 테스트 작성
  - _Requirements: 1.2, 1.4_

- [x] 2.4 데이터 전처리 및 저장 시스템 구현
  - Binance Kline 데이터 형식을 표준 OHLCV 형식으로 변환하는 함수 구현
  - 여러 소스 데이터 통합 및 중복 제거 로직 구현
  - 결측치 처리 및 데이터 품질 검증 로직 구현
  - Parquet 파일 기반 효율적인 데이터 저장 시스템 구현
  - 데이터 검증 파이프라인 및 메타데이터 관리 구현
  - 통합 테스트 작성
  - _Requirements: 1.3, 5.4_

- [ ] 3. 팩터 엔진 및 잔차 계산 모듈 구현
- [x] 3.1 암호화폐 팩터 계산기 구현 
  - Market, Size, NVT Ratio, Momentum, Volatility 팩터 계산 함수 작성
  - 팩터 데이터 검증 및 정규화 로직 구현
  - 팩터 계산 단위 테스트 작성
  - _Requirements: 2.1_

- [-] 3.2 Kelly-Pruitt-Su IPCA 라이브러리 통합 및 팩터 모델 구현
- [x] 3.2.1 IPCA 라이브러리 설치 및 환경 설정
  - requirements.txt에 ipca 패키지 추가
  - IPCA 라이브러리 설치 및 import 테스트
  - 기본 IPCA 사용법 검증 및 예제 코드 작성
  - 암호화폐 데이터에 맞는 데이터 형식 변환 함수 구현
  - _Requirements: 2.2_

- [x] 3.2.2 암호화폐 특성 데이터 전처리 파이프라인 구현
  - IPCA 라이브러리 요구사항에 맞는 패널 데이터 구조 구현
  - 엔티티 ID (암호화폐 심볼)와 시간 인덱스 매핑 시스템 구현
  - 암호화폐 특성 벡터 (시가총액, NVT 비율, 모멘텀, 변동성 등) 추출 및 정규화
  - 결측치 처리 및 데이터 품질 검증 로직 구현
  - IPCA 입력 형식 (MultiIndex DataFrame) 변환 함수 구현
  - 데이터 전처리 파이프라인 단위 테스트 작성
  - _Requirements: 2.2_

- [x] 3.2.3 IPCA 모델 래퍼 클래스 구현
  - Kelly-Pruitt-Su IPCA 라이브러리를 감싸는 CryptoIPCAModel 클래스 구현
  - 암호화폐 시장에 특화된 파라미터 설정 (n_factors, intercept, max_iter 등)
  - 롤링 윈도우 기반 모델 재추정 스케줄링 시스템 구현
  - 모델 상태 저장/로드 기능 구현 (pickle 또는 joblib 사용)
  - 팩터 로딩 Γ와 팩터 시계열 F 추출 메서드 구현
  - IPCA 모델 래퍼 단위 테스트 작성
  - _Requirements: 2.2, 2.3_

- [x] 3.2.4 잔차 계산 및 예측 시스템 구현
  - 추정된 IPCA 모델을 사용한 일별 잔차 계산 함수 구현
  - 새로운 특성 데이터에 대한 팩터 로딩 예측 기능 구현
  - 아웃오브샘플 잔차 계산 및 검증 로직 구현
  - 잔차 품질 지표 (자기상관, 이분산성) 계산 함수 구현
  - 잔차 시계열 저장 및 관리 시스템 구현
  - 잔차 계산 성능 최적화 및 통합 테스트 작성
  - _Requirements: 2.3, 2.4_

- [x] 3.2.5 IPCA 모델 진단 및 검증 도구 구현
  - 모델 적합도 평가 지표 (R², 설명력, 정보 비율) 계산 구현
  - 팩터 로딩의 통계적 유의성 검증 (부트스트랩 테스트) 구현
  - 팩터 안정성 및 시간에 따른 변화 분석 도구 구현
  - IPCA vs PCA 성능 비교 분석 도구 구현
  - 모델 진단 결과 시각화 (팩터 기여도, 잔차 분포, 로딩 히트맵) 구현
  - 모델 검증 및 진단 도구 단위 테스트 작성
  - _Requirements: 2.2, 4.1_

- [ ] 3.3 잔차 계산 및 롤링 윈도우 처리 구현
  - 롤링 윈도우 기반 잔차 계산 함수 구현
  - 잔차 시계열 데이터 저장 로직 작성
  - 잔차 계산 성능 최적화 및 테스트 작성
  - _Requirements: 2.3, 2.4_

- [ ] 4. CNN+Transformer 딥러닝 모델 구현
- [ ] 4.1 CNN+Transformer 아키텍처 구현
  - PyTorch 기반 CNN+Transformer 모델 클래스 작성
  - 모델 아키텍처 설정 및 하이퍼파라미터 관리 구현
  - 모델 초기화 및 가중치 로딩 함수 작성
  - 모델 아키텍처 단위 테스트 작성
  - _Requirements: 3.1_

- [ ] 4.2 커스텀 손실 함수 및 최적화 구현
  - 샤프 비율 최대화 손실 함수 구현
  - 평균-분산 최적화 손실 함수 구현
  - 옵티마이저 설정 및 학습률 스케줄러 구현
  - 손실 함수 단위 테스트 작성
  - _Requirements: 3.2_

- [ ] 4.3 모델 학습 파이프라인 구현
  - 롤링 윈도우 기반 학습 데이터 생성기 구현
  - GPU 가속 학습 파이프라인 구현
  - 모델 검증 및 조기 종료 로직 구현
  - 학습 파이프라인 통합 테스트 작성
  - _Requirements: 3.3, 3.4_

- [ ] 4.4 모델 추론 및 예측 시스템 구현
  - 실시간 예측 파이프라인 구현
  - 모델 버전 관리 및 A/B 테스트 시스템 구현
  - 예측 결과 저장 및 모니터링 로직 구현
  - 추론 시스템 성능 테스트 작성
  - _Requirements: 3.3_

- [ ] 5. 백테스팅 엔진 구현
- [ ] 5.1 포트폴리오 시뮬레이터 구현
  - 포트폴리오 가중치 기반 수익률 계산 함수 구현
  - 리밸런싱 로직 및 거래 신호 처리 구현
  - 포트폴리오 상태 추적 및 기록 시스템 구현
  - 포트폴리오 시뮬레이션 단위 테스트 작성
  - _Requirements: 4.1_

- [ ] 5.2 거래 비용 모델 구현
  - 거래 수수료, 슬리피지, 가스비 계산 함수 구현
  - 거래량 기반 비용 모델링 구현
  - 거래 비용 최적화 로직 구현
  - 거래 비용 모델 단위 테스트 작성
  - _Requirements: 4.2_

- [ ] 5.3 성과 지표 계산 시스템 구현
  - 샤프 비율, 알파, MDD, 수익률 계산 함수 구현
  - 리스크 지표 (VaR, CVaR, 베타) 계산 구현
  - 벤치마크 대비 성과 분석 함수 구현
  - 성과 지표 계산 단위 테스트 작성
  - _Requirements: 4.3_

- [ ] 5.4 백테스팅 엔진 통합 및 최적화
  - 전체 백테스팅 워크플로우 통합 구현
  - 병렬 처리를 통한 성능 최적화 구현
  - 백테스팅 결과 저장 및 캐싱 시스템 구현
  - 백테스팅 엔진 통합 테스트 작성
  - _Requirements: 4.1, 4.2, 4.3, 5.1_

- [ ] 6. 시각화 및 분석 대시보드 구현
- [ ] 6.1 성과 분석 시각화 구현
  - 누적 수익률 곡선 플롯 함수 구현
  - 자산별 비중 변화 시각화 구현
  - 팩터 노출도 히트맵 시각화 구현
  - 시각화 함수 단위 테스트 작성
  - _Requirements: 4.4_

- [ ] 6.2 대화형 대시보드 구현
  - Streamlit 또는 Dash 기반 웹 대시보드 구현
  - 실시간 성과 모니터링 기능 구현
  - 파라미터 조정 및 재실행 인터페이스 구현
  - 대시보드 기능 테스트 작성
  - _Requirements: 4.4_

- [ ] 6.3 리포트 생성 시스템 구현
  - PDF 형태의 성과 리포트 자동 생성 구현
  - 이메일 알림 및 리포트 배포 시스템 구현
  - 리포트 템플릿 및 커스터마이징 기능 구현
  - 리포트 생성 시스템 테스트 작성
  - _Requirements: 4.3, 4.4_

- [ ] 7. 시스템 통합 및 성능 최적화
- [ ] 7.1 마이크로서비스 통합 구현
  - 서비스 간 API 통신 인터페이스 구현
  - 서비스 디스커버리 및 로드 밸런싱 구현
  - 분산 시스템 오류 처리 및 회복력 구현
  - 서비스 통합 테스트 작성
  - _Requirements: 5.2_

- [ ] 7.2 성능 최적화 및 모니터링 구현
  - GPU 메모리 최적화 및 배치 처리 개선 구현
  - 데이터 파이프라인 병렬화 및 캐싱 최적화 구현
  - 시스템 모니터링 및 알림 시스템 구현
  - 성능 벤치마크 테스트 작성
  - _Requirements: 5.1, 5.4_

- [ ] 7.3 보안 및 설정 관리 구현
  - API 키 및 민감 정보 암호화 시스템 구현
  - 환경별 설정 관리 및 배포 파이프라인 구현
  - 접근 제어 및 감사 로그 시스템 구현
  - 보안 테스트 및 취약점 스캔 구현
  - _Requirements: 5.3_

- [ ] 8. 종합 테스트 및 검증
- [ ] 8.1 end-to-end 시스템 테스트 구현
  - 전체 시스템 워크플로우 통합 테스트 작성
  - 대용량 데이터 처리 성능 테스트 구현
  - 시스템 안정성 및 장애 복구 테스트 작성
  - _Requirements: 5.1, 5.4_

- [ ] 8.2 전략 백테스팅 검증 구현
  - Binance Public Data를 사용한 고품질 과거 데이터 기반 포괄적 백테스팅 실행
  - 다양한 시장 조건 (2017-2018 불장, 2018-2020 약장, 2020-2021 불장 등)에서의 전략 성과 검증
  - 다양한 시간 간격 (1시간, 4시간, 1일) 데이터를 활용한 강건성 테스트 구현
  - 통계적 유의성 및 아웃오브샘플 성과 검증
  - _Requirements: 4.1, 4.2, 4.3, 5.1_

- [ ] 8.3 문서화 및 배포 준비
  - API 문서 및 사용자 가이드 작성
  - 시스템 아키텍처 및 운영 매뉴얼 작성
  - Docker 컨테이너화 및 배포 스크립트 구현
  - _Requirements: 5.2_